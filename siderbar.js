

function ChangeToBass() {
  // 获取 label 元素
  var label = document.getElementById("myLabel");

      // 新的文本内容
      var newText = 
     
      "言語交流  : <br>" +
      "學習如何有效地介紹自己，建立初步的人際關係。<br>掌握正確的問候方式，使對話更加友好和自然。<br>學習在不同情境下使用適當的稱謂，展示禮貌和尊重。<br>掌握回應感謝和道歉的表達方式，維護良好的人際關係。<br>" +
      "100. 自我介紹 Penjelasan interaksi umpan balik<br>" +
      "101. 問候用語 Tutur Sapa<br>" +
      "102. 稱謂1 Panggilan-1<br>" +
      "103. 稱謂2 Panggilan-2<br>" +
      "104. 道謝與道歉的回答 Kalimat Berterima Kasih dan Minta Maaf<br>" +
      "105. 告別用語 Kalimat Perpisahan<br><br>" +
      "數字和時間  : <br>掌握基本的數字，以及如何使用它們進行計數和交流。<br>學習表達時間，包括時鐘時間和其他時間相關的用語。<br>" +
      "106. 數字-1 Bilangan-1<br>" +
      "107. 數字-2 Bilangan-2<br>" +
      "108. 時間 Waktu<br><br>" +
      "日期和季節  : <br>" +
      "學習表達星期和月份，以及相關的日期用語。<br>掌握描述季節和天氣的詞彙，便於日常交流。<br>" +
      "109. 星期/月份Minggu Bulan<br>" +
      "110. 季節天氣 Musim Cuaca<br><br>" +
      "色彩和身體  : <br>" +
      "學習描述和辨識不同的顏色，擴大語言表達能力。<br>掌握描述身體部位的詞彙，有助於談論健康和症狀。<br>" +
      "111. 顏色 Warna<br>" +
      "112. 身體的部位 Bagian Tubuh<br><br>" +
      "健康和就醫  : <br>" +
      "學習表達生病的症狀和感覺，以便尋求幫助。<br>掌握在醫院或診所挂號的相關詞彙和對話。<br>" +
      "113. 生病 Sakit<br>" +
      "114. 在掛號處 Dibagian Pendaftaran<br>" +
      "115. 看醫生-1 Berobat Dokter-1<br>" +
      "116. 看醫生-2 Berobat Dokter-2<br>" +
      "117. 領藥和打針 Mengambil Obat dan Menyuntik<br><br>" +
      "問路和指引  : <br>" +
      "學習如何詢問和提供路線指引，方便在陌生地區導航。<br>" +
      "118. 問路 Tanya Jalan<br>"
      

      // 更改 label 的文本
      label.innerHTML = newText;
}

 function ChangeToMenu() {
    // 获取 label 元素
    var label = document.getElementById("myLabel");

        // 新的文本内容
        var newText = 
       
        "您所要挑選的外籍移工對於工作的需求必須具備特定的技能，及相當的語言能力。因此在入境前，移工需要接受相應的技能培訓及語言培訓，以確保他們能夠勝任工作。<br><br>" +
        "語言能力確實是一個漸進的過程，需要透過耐心和持續的努力。以下是我們印尼籍移工的語言訓練及自主學習的設計，以及學習成效：<br><br>" +
        "實用的語言課程：<br>" +
        "為了讓初來乍到的新進移工，能夠在有限的學習時間內獲得最大的效益，我們精心設計了課程內容，確保每個字、每句話都是確實實用的。這有助於學員在實際生活中能夠立即應用所學，提高學習的效果。<br><br>" +
        "自主學習的設計：<br>" +
        "我們利用文字、圖片和線上資源設計了一個便利的自主學習應用程式，讓所有學員可以隨時進行自主學習及自我評量。這有效地提升了學員的聽、說的綜合能力。<br>" +
        "聽力訓練：<br>" +
        "透過反覆聆聽語音音檔，我們訓練學員熟悉語言的音調、語速以及常用詞彙。這種方法確保學員能夠更自信地應對實際語境，提高他們的聽力水平。<br><br>" +
        "口語練習：<br><br>" +
        "我們鼓勵學員勇於開口，參與各種口語練習，包括自我介紹、面試練習以及討論主題等。這些模擬真實情境的活動，可以有效地提升了學員的口語表達能力，讓他們能更快適應工作和與您府上溝通的需求。<br><br>" +
        "在【學習履歷表】中呈現的學習成績，正是這套系統的實際成績。這個系統不僅能夠協助學員在語言方面取得明顯進步，也為他們到台灣工作和生活提供了更多信心。更是您在挑人選時最重要的依據。<br><br>"         
        // 更改 label 的文本
        label.innerHTML = newText;
  }

function ChangeToFamily() {
    // 获取 label 元素
    var label = document.getElementById("myLabel");

        // 新的文本内容
        var newText = 
        

"家事包括關於日常生活和家庭活動及居家照顧的相關主題。<br>" +
"它涵蓋了一系列與家庭生活和日常活動有關的單元，包括烹飪、居家生活、家務和照顧等內容。<br><br>" +

"201. 生活作息 Kehidupan Sehari Hari<br><br>" +

"烹飪類別主要涉及食物和烹飪相關活動，以及與烹飪過程和食材相關的詞彙和表達。<br>" +
"202. 烹飪-1 Memasak-1<br>" +
"203. 烹飪-2 Memasak-2<br>" +
"204. 烹飪-3 Memasak-3<br><br>" +

"居家生活類別涵蓋了家庭生活中不同空間的描述和相關活動。<br>" +
"從客廳到房間再到廁所，這些單元涵蓋了在不同區域的日常活動和常見詞彙。<br>" +
"205. 在客廳 Diruang Tamu<br>" +
"206. 在房間 Di kamar<br>" +
"207. 在廁所 Di WC<br><br>" +

"家務類別包括與家務相關的活動和招待客人的禮節。<br>" +
"它涵蓋了洗衣、燙衣、洗碗以及清潔家居的相關詞彙和表達。<br>" +

"208. 洗衣服 Mencuci Baju<br>" +
"209. 燙衣服 Menyetrika Baju<br>" +
"210. 洗碗 Mencuci Piring<br>" +
"211. 清潔，鏡子，玻璃 Membersihkan Cermin dan Kaca<br>" +
"212. 清潔電風扇 Membersihkan Kipas Angin<br>" +
"213. 招待賓客 Menjamu Tamu Dengan Buah<br><br>"+ 

"照顧類別涉及照顧老人、病人、小孩和嬰兒的相關表達和技巧。<br>" +

"214. 照顧老人-1 Merawat Orang-1<br>" +
"215. 照顧老人-2 Merawat Orang-2<br>" +
"216. 照顧病人 Merawat Pasien<br>" +
"217. 照顧小孩 Merawat Anak<br>" +
"218. 照顧嬰兒 Merawat Bayi<br>" 
        // 更改 label 的文本
        label.innerHTML = newText;
}

const firebaseConfig = {
    apiKey: "AIzaSyD-GhFz53zr6-bIvfCUWgEHOV2ERJoh5cw",
    authDomain: "jobscript-79d02.firebaseapp.com",
    databaseURL: "https://jobscript-79d02-default-rtdb.firebaseio.com",
     projectId: "jobscript-79d02",
    storageBucket: "jobscript-79d02.appspot.com",
    messagingSenderId: "1013512833185",
    appId: "1:1013512833185:web:864101b77f711ac894c8e0"
};

firebase.initializeApp(firebaseConfig);
const database = firebase.database();

function ChangeToGroup(groupNumber) {

  // 获取页面上的元素
  var groupDataElement = document.getElementById("groupData");
  var LBlogin = document.getElementById("LBlogin"); 
  var groupDataFire = [];
  var groupData = ""; // 用于存储组的信息
  var score ="";
  var acerKey = [];
  var values ="";
  // 参考你的 Firebase 数据库路径
  const urlParams = new URLSearchParams(window.location.search);
  const key = urlParams.get('key');
  var dbRef = firebase.database().ref("KFA/" + key);

  // 根据组号构建查询条件
  var startKey, endKey;

  switch(groupNumber) {
      case 1:
          startKey = "101";
          endKey = "105";
          groupData = "<br>" +
                      "101. 問候用語<br>" +
                      "102. 稱謂-1<br>" +
                      "103. 稱謂-2<br>" +
                      "104. 道謝與道歉的回答<br>" +
                      "105. 告別用語";
                      
          break;
      case 2:
          startKey = "106";
          endKey = "108";
          groupData =  "<br>" +
                       "106. 數字-1<br>" +
                       "107. 數字-2<br>" +
                       "108. 時間";
          break;
      case 3:
            startKey = "109";
            endKey = "110";
            groupData = "<br>" +
                        "109. 星期/月份<br>" +
                        "110. 季節天氣";
            break;
      case 4:
            startKey = "111";
            endKey = "112";
            groupData = "<br>" +
                        "111. 顏色 <br>" +
                        "112. 身體的部位";
              break;
      case 5:
            startKey = "113";
            endKey = "117";
            groupData =  "<br>" +
                         "113. 生病<br>" +
                         "114. 在掛號處<br>" +
                         "115. 看醫生-1<br>" +
                         "116. 看醫生-2 <br>" +
                         "117. 領藥和打針";
                break;
      case 6:
                  startKey = "118";
                  endKey = "118";
                  groupData ="<br>" +
                             "118. 問路";
                  break;
      case 7:
                    startKey = "201";
                    endKey = "201";
                    groupData ="<br>" +
                               "201. 生活作息";
                    break;
      case 8:
                        startKey = "202";
                        endKey = "204";
                        groupData ="<br>" +
                        "202. 烹飪-1<br>" +
                        "203. 烹飪-2<br>" +
                        "204. 烹飪-3 ";
                        break;
      case 9:
                            startKey = "205";
                            endKey = "207";
                            groupData ="<br>" +
                            "205. 在客廳<br>" +
                            "206. 在房間<br>" +
                            "207. 在廁所 ";
                            break;
      case 10:
                                startKey = "208";
                                endKey = "213";
                                groupData ="<br>" +
                                "208. 洗衣服<br>" +
                                "209. 燙衣服<br>" +
                                "210. 洗碗 ";
                                "211. 清潔，鏡子，玻璃 ";
                                "212. 清潔電風扇 ";
                                "213. 招待賓客 ";
                                break;
       case 11:
                                    startKey = "214";
                                    endKey = "218";
                                    groupData ="<br>" +
                                    "214. 照顧老人-1 <br>" +
                                    "215. 照顧老人-2  ";
                                    "216. 照顧病人 ";
                                    "217. 照顧小孩 ";
                                    "218. 照顧嬰兒  ";
                                    break;



    }
    // 执行查询
  if (startKey && endKey) {
        dbRef.orderByKey().startAt(startKey).endAt(endKey).once("value", function(snapshot) {
         var groupIndex = 0; // 初始化组索引为 0
         var index = 1; // 初始化序号为1
         var arrayIndex = 0; // 初始化数组索引为 0
        
            snapshot.forEach(function(childSnapshot) {
             var key = childSnapshot.key;
             acerKey.push(key);
        
              values = childSnapshot.val(); // 取得子節點的所有值
        
             // 將每個 values 物件轉換為陣列，並將每個物件存入 groupDataFire 陣列中
             var objArray = [];
                for (var key in values) {
                 if (values.hasOwnProperty(key)) {
                     objArray.push(values[key]);
                    }
                }
             groupDataFire.push(objArray); // 將每個 Object 陣列存入 groupDataFire 陣列中
            });
            LBlogin.innerHTML =acerKey

            // 初始化 LBlogin 的 HTML 内容为空字符串
           LBlogin.innerHTML = "";
           groupDataElement.innerHTML = "";
           // 迭代 acerKey 数组
            acerKey.forEach(function(key, index) {
              // 获取当前索引处的 objArray
             var objArray = groupDataFire[index];
    
              // 如果 objArray 存在且不为空
              if (objArray && objArray.length > 0) {
                 // 将当前 key 拼接到 LBlogin 的 HTML 内容中
                 LBlogin.innerHTML += key + "單元中文成績: ";
                 groupDataElement.innerHTML += "<br>" + "<br>" + key + "單元中文成績: "+"<br>";
                 // 迭代 objArray 中的值，并将其拼接到 LBlogin 的 HTML 内容中
                 objArray.forEach(function(value) {
                     LBlogin.innerHTML += value + " ";
                     groupDataElement.innerHTML+= value + " ";
                    } );
                 // 在每个键的值后添加换行
                 LBlogin.innerHTML += "<br>";
                };
            });
            generateLineChart(acerKey, groupDataFire);
        });  
    };
}

// 定义随机颜色生成函数
function getRandomColor() {
    var letters = '0123456789ABCDEF';
    var color = '#';
    for (var i = 0; i < 6; i++) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
}

function generateLineChart(acerKey, groupDataFire) {
    // 定义数据集数组
    var datasets = [];
    // 遍历 acerKey 数组
    acerKey.forEach(function(key, index) {
        var dataPoints = []; // 创建一个新的数据点数组

        // 遍历 groupDataFire 中当前组的数据
        groupDataFire[index].forEach(function(data, dataIndex) {
            // 创建包含 x 和 y 属性的对象，其中 x 是当前组的索引，y 是数据值
            var dataPoint = { x: dataIndex+1, y: data };
            dataPoints.push(dataPoint); // 将数据点添加到数据点数组中
        });

            // 将数据点数组添加到数据集数组中
       datasets.push({
        label: key,
        borderColor: getRandomColor(),
        data: dataPoints
        });
    });

    // 定义图表选项
    var options = {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
            x: {
                type: 'linear', // x 轴类型为线性类型，因为 x 是序号
                position: 'bottom' // x 轴位置在底部
            },
            y: {
                type: 'linear', // y 轴类型为线性类型，因为 y 是成绩
                position: 'left', // y 轴位置在左侧
                ticks: {
                    stepSize: 5, // y 轴刻度之间的步长
                }
            }
        }
    };

    // 定义图表数据对象，使用数据集数组
    var chartData = {
        datasets: datasets // 数据集数组
    };

    // 获取 canvas 元素的上下文对象
    var ctx = document.getElementById('myLineChart').getContext('2d');

    // 获取先前的图表实例
    var oldChart = Chart.getChart("myLineChart");

    // 如果存在先前的图表实例，则销毁它
    if (oldChart) {
        oldChart.destroy();
    }

    // 创建折线图对象并绘制图表
    var myLineChart = new Chart(ctx, {
        type: 'line', // 图表类型为折线图
        data: chartData, // 图表数据
        options: options // 图表选项
    });
}

function toggleCollapse() {
    // 获取要收起/展开的元素
    var subclass = document.getElementById("subclass");
    // 切换 collapse 类的状态
    if (subclass.classList.contains("show")) {
      subclass.classList.remove("show");
    } else {
      subclass.classList.add("show");
    }
}

function executeFunctions() {
    ChangeToBass();  // 执行第一个函数
    toggleCollapse();  // 执行第二个函数
}
